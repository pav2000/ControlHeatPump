<html>
<head>
	<title>Система. Народный контроллер ТН</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type='text/javascript' src='scripts.js'></script>
	<script type="text/javascript">
		window.onload = function() { //clock();
		updateParam("get_resetCause,get_uptime,get_tempDS3231,get_startDT,get_freeRam,get_sysInfo");
	};
	</script>
</head>
<body class="about">
<div id="menu" class="menu"><script src="menu.js"></script></div>
<div class="content">
<h1>Система 	<input type="submit" value="?" onclick='location.assign("system-help.html")' style="float:none;">
<input type="submit" value="Сохранить статистику (1)" onclick='loadParam("set_SAVE_STATS")'> <input type="submit" value="Подготовка к обновлению" onclick='loadParam("set_SAVE_UPD")' style="float:right;margin-right:10px;"></h1>
<div class="row1">
<table>
	<thead><tr><th>Параметр</th><th>Значение</th></tr></thead>
	<tbody>
		<tr><td>Время с последней перезагрузки</td><td id="get_uptime"></td></tr>
		<tr><td>Последний сброс</td><td id="get_startdt"></td></tr>
		<tr><td>Причина последнего сброса контроллера</td><td id="get_resetcause"></td></tr>
		<tr><td>Температура платы (DS3231)</td><td id="get_tempds3231"></td></tr>
		<tr><td>Свободная память</td><td id="get_freeram"></td></tr>
	</tbody>	
	<tbody id="get_sysinfo">
	</tbody>
</table>
<br>
<input type="submit" value="Сброс контроллера" onclick='if(confirm("Перезагрузить контроллер?")) loadParam("RESET_DUE");'>
<input type="submit" value="Сброс cети" onclick='loadParam("RESET_NET")'>
<input type="submit" value="Сброс сезонных счетчиков" onclick='if(document.getElementById("reset_code").value=="RESET") loadParam("RESET_CNT_,RELOAD")'> Введите RESET: <input id="reset_code" size="7">
<p>Для сброса всех счетчиков используйте запрос RESET_CNT_ALL</p>
1. Запись накопленных данных за последний день, нужно делать перед обновлением прошивки.<br>
2. Старший байт номер задачи (номер см. на странице ОС RTOS), младший байт код ошибки (1-configASSERT fails, 2-malloc fails, 3-stack overflow, 4-hard fault, 5-bus fault, 6-usage fault, 7-crash data)<br>
3. Установка флага: Сервис - Сеть - Ежеминутный контроль связи с сетью, и при необходимости его сброс<br>
4. <b>State:</b> 0 - Выключен, 1 - Стартует, 2 - Останавливается, 3 - Работает, 4 - Ожидание, 5 - Ошибка.<br>
&#8195; <b>modWork:</b>
<br>&#8195; Перечисляемый тип - точка возврата из алгоритма управления (расшифровка состояния)
<br>&#8195; Расшифровка кода (пример Bp12  Бойлер - Алгоритм ПИД - изменение частоты ПИДом)
<br>&#8195; Код имеет три поля &lt;источник&gt;&lt;алгоритм&gt;&lt;код_алгоритма&gt;
<br>&#8195; Источник: B-бойлер, H-отопление, C-охлаждение
<br>&#8195; Алгоритм: h - гистерезис, p - ПИД
<br>&#8195; Код алгоритма
<br>&#8195; 1 - выключение по подаче
<br>&#8195; 2 - включение по гистерезису
<br>&#8195; 3 - выключение по гистерезису
<br>&#8195; 4 - внутри гистерезиса (продолжение: нагрев или охлаждение)
<br>&#8195; 5 - внутри гистерезиса пауза
<br>&#8195; 6 - сброс частоты по подаче
<br>&#8195; 7 - сброс частоты по мощности
<br>&#8195; 8 - сброс частоты по температуре компрессора
<br>&#8195; 9 - сброс частоты по давлению
<br>&#8195; 10 - разгон, пид не работает
<br>&#8195; 11 - время пида не пришло
<br>&#8195; 12 - дошли до ПИДа, регулируем
<br>&#8195; 13 - включение по обратке достигнута минимальная температура обратки
<br>&#8195; 14 - работа супербойлера ПИД ГВС (заход в бойлер)
<br>&#8195; 15 - Бойлер греется от предкондесатора (заход в отопление)
<br>&#8195; 16 - сброс частоты по току инвертора
<br>&#8195; 17 - блокировка роста частоты ПИДом при подходе к уровням защиты ПОДАЧА
<br>&#8195; 18 - блокировка роста частоты ПИДом при подходе к уровням защиты МОЩНОСТЬ
<br>&#8195; 19 - блокировка роста частоты ПИДом при подходе к уровням защиты ТОК
<br>&#8195; 20 - блокировка роста частоты ПИДом при подходе к уровням защиты ТCOMP
<br>&#8195; 21 - блокировка роста частоты ПИДом при подходе к уровням защиты ДАВЛЕНИЮ
<br>&#8195; 22 - Выключение нагрева бойлера ТН для перехода в режим ДОГРЕВА его ТЭНом
<br>&#8195; 23 - Выключение режима ТН при достижении уровня защиты по подаче (достижение границы)
<br>&#8195; 24 - Выключение режима ТН при достижении уровня защиты по мощности (достижение границы)
<br>&#8195; 25 - Выключение режима ТН при достижении уровня защиты по температуре компрессора (достижение границы)
<br>&#8195; 26 - Выключение режима ТН при достижении уровня защиты по давлению (достижение границы)
<br>&#8195; 27 - Выключение режима ТН при достижении уровня защиты по току (достижение границы)
<br>&#8195; 28 - Ограничение мощности при работе от резервного источника питания (сброс частоты)
<br>&#8195; 29 - Выключение режима ТН при достижении минимальной частоты при работе от резервного источника питания.
<br>&#8195; 30 - Ограничение при работе от генератора.
<br><br>&#8195; fHP(0x..): 01 - BoilerTogetherHeat, 02 - SunNotInited, 04 - SunSwitching, 08 - SunReady, 10 - SunWork.
</div>
</div>
</body>
</html>
